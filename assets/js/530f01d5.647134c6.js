"use strict";(self.webpackChunkOPS345_CE=self.webpackChunkOPS345_CE||[]).push([[461],{8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}},9597:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Labs/lab6","title":"Lab 6 - Amazon Elastic Container Service (ECS)","description":"Configure the Elastic Container Service (ECS)","source":"@site/docs/Labs/lab6.md","sourceDirName":"Labs","slug":"/Labs/lab6","permalink":"/OPS345/Labs/lab6","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/Labs/lab6.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"lab6","title":"Lab 6 - Amazon Elastic Container Service (ECS)","sidebar_position":6,"description":"Configure the Elastic Container Service (ECS)"},"sidebar":"courseNotesSidebar","previous":{"title":"Lab 5 - Amazon RDS Relational Database Service","permalink":"/OPS345/Labs/lab5"},"next":{"title":"Lab 7 - Simple Storage Service (S3) Glacier","permalink":"/OPS345/Labs/lab7"}}');var s=i(4848),t=i(8453);const o={id:"lab6",title:"Lab 6 - Amazon Elastic Container Service (ECS)",sidebar_position:6,description:"Configure the Elastic Container Service (ECS)"},l="Lab 6 - ECS",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Investigation 1: Creating a local web application using Docker",id:"investigation-1-creating-a-local-web-application-using-docker",level:2},{value:"Install docker",id:"install-docker",level:3},{value:"Creating a web page",id:"creating-a-web-page",level:3},{value:"Building and running your application",id:"building-and-running-your-application",level:3},{value:"Viewing your web page",id:"viewing-your-web-page",level:3},{value:"Pushing your code to dockerhub",id:"pushing-your-code-to-dockerhub",level:3},{value:"Creating a dockerhub account and repository",id:"creating-a-dockerhub-account-and-repository",level:4},{value:"Generating a gpg key locally",id:"generating-a-gpg-key-locally",level:4},{value:"Generate a personal access token",id:"generate-a-personal-access-token",level:4},{value:"Pushing your local docker file to dockerhub",id:"pushing-your-local-docker-file-to-dockerhub",level:4},{value:"Investigation 2: Amazon ECS (Elastic Container Service) Configuration",id:"investigation-2-amazon-ecs-elastic-container-service-configuration",level:2},{value:"Task Definition",id:"task-definition",level:3},{value:"Task definition configuration",id:"task-definition-configuration",level:4},{value:"Infrastructure requirements",id:"infrastructure-requirements",level:4},{value:"Container - 1",id:"container---1",level:4},{value:"Investigation 3: Creating a Cluster",id:"investigation-3-creating-a-cluster",level:2},{value:"Creating a service",id:"creating-a-service",level:3},{value:"Service Details",id:"service-details",level:4},{value:"Deployment configuration",id:"deployment-configuration",level:4},{value:"Networking",id:"networking",level:4},{value:"Security Group",id:"security-group",level:4}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"lab-6---ecs",children:"Lab 6 - ECS"})}),"\n",(0,s.jsx)(n.h1,{id:"under-development",children:"Under Development"}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.h2,{id:"investigation-1-creating-a-local-web-application-using-docker",children:"Investigation 1: Creating a local web application using Docker"}),"\n",(0,s.jsx)(n.h3,{id:"install-docker",children:"Install docker"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/desktop/setup/install/windows-install/",children:"Windows"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/desktop/setup/install/mac-install/",children:"Mac"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/desktop/setup/install/linux/",children:"Linux"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-web-page",children:"Creating a web page"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Create a local directory called ",(0,s.jsx)(n.strong,{children:"lab6"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Open a text editor (like VS Code) and create the file ",(0,s.jsx)(n.strong,{children:"index.html"})," with the following contents. Save it in the ",(0,s.jsx)(n.strong,{children:"lab6"})," directory."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>My Web Page</title>\n    </head>\n    <body>\n        <p>Hello World</p>\n    </body>\n</html>\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Using a text editor, create the following docker file. Save it as ",(0,s.jsx)(n.strong,{children:"Dockerfile"})," in the ",(0,s.jsx)(n.strong,{children:"lab6"})," directory."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"FROM httpd:latest\nWORKDIR /usr/local/apache2/htdocs\nCOPY . /usr/local/apache2/htdocs\nEXPOSE 80\n"})}),"\n",(0,s.jsx)(n.h3,{id:"building-and-running-your-application",children:"Building and running your application"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker build -t my-apache-app .\ndocker run --name my-apache-app -d -p 80:80 -t my-apache-app\n"})}),"\n",(0,s.jsx)(n.h3,{id:"viewing-your-web-page",children:"Viewing your web page"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Open a browser and enter localhost in the URL bar"}),"\n",(0,s.jsx)(n.li,{children:"You should see your webpage"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"pushing-your-code-to-dockerhub",children:"Pushing your code to dockerhub"}),"\n",(0,s.jsx)(n.h4,{id:"creating-a-dockerhub-account-and-repository",children:"Creating a dockerhub account and repository"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Create a dockerhub account: ",(0,s.jsx)(n.a,{href:"https://hub.docker.com",children:"https://hub.docker.com"})]}),"\n",(0,s.jsx)(n.li,{children:"Create a repository. Name it my-apache-app"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"generating-a-gpg-key-locally",children:"Generating a gpg key locally"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/desktop/setup/sign-in/",children:"gpg --generate-key"})}),"\n",(0,s.jsx)(n.h4,{id:"generate-a-personal-access-token",children:"Generate a personal access token"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Generate a personal access token on dockerhub - save this."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Generate GPG key"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gpg --generate-key\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Initialize the key"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pass init ID\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Login"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker login -u username\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Paste the PAT"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Tag your local image"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker tag local-image:my-apache-app new-repo:my-apache-app\n"})}),"\n",(0,s.jsx)(n.h4,{id:"pushing-your-local-docker-file-to-dockerhub",children:"Pushing your local docker file to dockerhub"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Push your image to docker hub"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker push jmcarman/my-apache-app:latest\n"})}),"\n",(0,s.jsx)(n.h2,{id:"investigation-2-amazon-ecs-elastic-container-service-configuration",children:"Investigation 2: Amazon ECS (Elastic Container Service) Configuration"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"[!NOTE]\nThese instructions have been updated to use the new ECS UI. If you notice any bugs in the instructions, please let your professor know so that they can be fixed."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Now that we have a general idea of what ECS entails, we'll learn how it works by ",(0,s.jsx)(n.em,{children:"manually"})," setting-up an ECS Cluster, Service, and Task for our ",(0,s.jsx)(n.code,{children:"my-apache-app"})," microservice."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Start the ",(0,s.jsx)(n.strong,{children:"AWS Academy Learner Lab"})," and ",(0,s.jsx)(n.strong,{children:"AWS Console"}),". Search for ",(0,s.jsx)(n.strong,{children:"Elastic Container Service"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["We'll need to define our ",(0,s.jsx)(n.strong,{children:"Container definition"}),", ",(0,s.jsx)(n.strong,{children:"Task definition"}),", ",(0,s.jsx)(n.strong,{children:"Service"}),", and ",(0,s.jsx)(n.strong,{children:"Cluster"}),", and we'll begin with the ",(0,s.jsx)(n.strong,{children:"Task Definition"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"task-definition",children:"Task Definition"}),"\n",(0,s.jsxs)(n.p,{children:["As we said above, the ",(0,s.jsx)(n.strong,{children:"Task Definition"})," defines how to run our container with ECS. Let's create one for our ",(0,s.jsx)(n.code,{children:"my-apache-app"})," server:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.strong,{children:"Amazon Elastic Container Service"})," console, choose ",(0,s.jsx)(n.strong,{children:"Task definitions"})," in the left-hand menu"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"task-definition-configuration",children:"Task definition configuration"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Click the ",(0,s.jsx)(n.strong,{children:"Create new task definition"})," button and ",(0,s.jsx)(n.strong,{children:"Create new task definition"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.strong,{children:"Task definition configuration"}),", give your new task definition a ",(0,s.jsx)(n.strong,{children:"family name"}),": ",(0,s.jsx)(n.code,{children:"my-apache-app"}),". This name will be the basis for the many individual task definition versions that we will create in the coming weeks."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"infrastructure-requirements",children:"Infrastructure requirements"}),"\n",(0,s.jsx)(n.p,{children:"As we know from our work with EC2, running a container on AWS requires compute resources (e.g., EC2 instances), and these need to be provisioned and set with sufficient resources. Previously we did this manually, but now we will use the managed Fargate service to handle our compute."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.strong,{children:"Infrastructure requirements"})," we specify the infrastructure computing needs for our task. We will be using ",(0,s.jsx)(n.strong,{children:"AWS Fargate"})," serverless compute and ",(0,s.jsx)(n.strong,{children:"Linux/X86_64"})," for our ",(0,s.jsx)(n.strong,{children:"Operating system/Architecture"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["For our ",(0,s.jsx)(n.strong,{children:"Task size"}),", we need to define how much ",(0,s.jsx)(n.strong,{children:"CPU"})," and ",(0,s.jsx)(n.strong,{children:"Memory"})," to allocate. To start, our needs are modest: we can use ",(0,s.jsx)(n.strong,{children:".25 vCPU"})," and ",(0,s.jsx)(n.strong,{children:".5 GB Memory"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["In terms of security, we need to define two different ",(0,s.jsx)(n.a,{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html",children:"IAM Roles"})," within our AWS account. First, the ",(0,s.jsx)(n.strong,{children:"Task role"})," specifies the rights that the container running within the task will have (e.g., to be able to access other AWS resources in our account); second, the ",(0,s.jsx)(n.strong,{children:"Task execution role"})," specifies what rights that the ECS cluster and infrastructure will have (e.g., to access resources like our ECR repo). Set both of these roles to the pre-defined ",(0,s.jsx)(n.strong,{children:"LabRole"})," AWS Role, which will grant them access to any resources we own."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"container---1",children:"Container - 1"}),"\n",(0,s.jsxs)(n.p,{children:["Next we define the container (or containers if running multiple), that will be run in our task. This step is a bit like defining the options to pass to ",(0,s.jsx)(n.code,{children:"docker run"})," on the command line."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["[!IMPORTANT]\nIn order to make the following changes work, your Docker image needs to use the ",(0,s.jsx)(n.code,{children:"root"})," user. If you have previously set ",(0,s.jsx)(n.code,{children:"USER node"})," or similar, you'll need to remove this and use the default ",(0,s.jsx)(n.code,{children:"root"})," user instead. This is necessary because we are going to use a privileged port (i.e., port below 1024), which requires elevated rights. You should make that change if necessary then push new images to your Docker registries. If you do not do this, your server will crash with an ",(0,s.jsx)(n.code,{children:"EACCESS: permission denied 0.0.0.0:80"})," error when it tries to listen on port 80."]}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["For the ",(0,s.jsx)(n.strong,{children:"Container details"}),", use a ",(0,s.jsx)(n.strong,{children:"Name"})," of ",(0,s.jsx)(n.code,{children:"my-apache-app"}),", an ",(0,s.jsx)(n.strong,{children:"Image URI"})," with your ",(0,s.jsx)(n.strong,{children:"Docker Hub"})," ",(0,s.jsx)(n.code,{children:"my-apache-app"})," image and the ",(0,s.jsx)(n.code,{children:"latest"})," tag URI (i.e., ",(0,s.jsx)(n.code,{children:"jmcarman/my-apache-app:latest"}),"), and specify ",(0,s.jsx)(n.code,{children:"Yes"})," for ",(0,s.jsx)(n.strong,{children:"Essential container"}),", since we can't run our task without this container."]}),"\n",(0,s.jsxs)(n.li,{children:["For the ",(0,s.jsx)(n.strong,{children:"Port mappings"}),", we'll use the production HTTP port, ",(0,s.jsx)(n.code,{children:"80"}),". This is the default configuration: ",(0,s.jsx)(n.strong,{children:"Container port"})," is ",(0,s.jsx)(n.code,{children:"80"}),", uses the ",(0,s.jsx)(n.code,{children:"TCP"})," ",(0,s.jsx)(n.strong,{children:"Protocol"}),", and that the ",(0,s.jsx)(n.strong,{children:"App protocol"})," is ",(0,s.jsx)(n.code,{children:"HTTP"}),". You can leave the ",(0,s.jsx)(n.strong,{children:"Port name"})," empty."]}),"\n",(0,s.jsxs)(n.li,{children:["For the ",(0,s.jsx)(n.strong,{children:"Resource allocation limits"}),", specify the amount of ",(0,s.jsx)(n.strong,{children:"CPU"}),", ",(0,s.jsx)(n.code,{children:".25"}),", and ",(0,s.jsx)(n.strong,{children:"Memory"}),", ",(0,s.jsx)(n.code,{children:".5"})," for the ",(0,s.jsx)(n.strong,{children:"Memory soft limit"}),". This means your container will reserve ",(0,s.jsx)(n.code,{children:"512 MiB"})," of RAM when it starts (a ",(0,s.jsx)(n.strong,{children:"Hard limit"})," would define the ",(0,s.jsx)(n.em,{children:"maximum"})," memory allowed, which we won't set)."]}),"\n",(0,s.jsxs)(n.li,{children:["The default values for ",(0,s.jsx)(n.strong,{children:"Logging"})," are good. ECS will use the ",(0,s.jsx)(n.a,{href:"https://aws.amazon.com/cloudwatch/",children:"Amazon CloudWatch"})," service to collect our container logs into a ",(0,s.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CloudWatchLogsConcepts.html",children:"Log Group"})," named ",(0,s.jsx)(n.code,{children:"/ecs/fragments-task"}),". You should write this down for later, when you need to see the logs for your server."]}),"\n",(0,s.jsxs)(n.li,{children:["The default values for ",(0,s.jsx)(n.strong,{children:"Storage"})," are also good, since we won't be storing our data on disk (i.e., currently we use an in-memory database and later we'll use Amazon database services)."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Everything else should be good using the default configuration. You can now click the ",(0,s.jsx)(n.strong,{children:"Create"})," button."]}),"\n",(0,s.jsxs)(n.p,{children:["Your ",(0,s.jsx)(n.code,{children:"my-apache-app"})," Task Definition is now created, and you can inspect or edit it at any time by coming back to ",(0,s.jsx)(n.strong,{children:"Amazon Elastic Container Service"})," > ",(0,s.jsx)(n.strong,{children:"Task definitions"})," > ",(0,s.jsx)(n.strong,{children:"my-apache-app"}),". When you do make changes, a new version will be created (i.e., this first version is ",(0,s.jsx)(n.strong,{children:"Revision 1"}),", ",(0,s.jsx)(n.code,{children:"my-apache-app:1"}),")."]}),"\n",(0,s.jsx)(n.h2,{id:"investigation-3-creating-a-cluster",children:"Investigation 3: Creating a Cluster"}),"\n",(0,s.jsx)(n.p,{children:"Next we need to create a cluster where we can run our task."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Click the ",(0,s.jsx)(n.strong,{children:"Create cluster"})," button"]}),"\n",(0,s.jsxs)(n.li,{children:["Give your cluster a name: ",(0,s.jsx)(n.code,{children:"my-apache-app"})]}),"\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.strong,{children:"Infrastructure"}),", choose ",(0,s.jsx)(n.strong,{children:"AWS Fargate (serverless)"})]}),"\n",(0,s.jsx)(n.li,{children:"The default settings are good for all other options"}),"\n",(0,s.jsxs)(n.li,{children:["Click the ",(0,s.jsx)(n.strong,{children:"Create"})," button"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["It will take a minute or two for the cluster to be fully created. Once it is, move on to create your ",(0,s.jsx)(n.strong,{children:"Service"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-service",children:"Creating a service"}),"\n",(0,s.jsxs)(n.p,{children:["The final step is to create a ",(0,s.jsx)(n.strong,{children:"Service"})," within our cluster. A service is responsible for deploying, managing, and monitoring our tasks (and the containers they run)."]}),"\n",(0,s.jsxs)(n.p,{children:["Click on the newly created ",(0,s.jsx)(n.code,{children:"my-apache-app"})," cluster, then under ",(0,s.jsx)(n.strong,{children:"Services"}),", click the ",(0,s.jsx)(n.strong,{children:"Create"})," button"]}),"\n",(0,s.jsxs)(n.p,{children:["For our service's ",(0,s.jsx)(n.strong,{children:"Environment"})," we will use our ",(0,s.jsx)(n.strong,{children:"Existing cluster"}),", ",(0,s.jsx)(n.code,{children:"my-apache-app"}),". The ",(0,s.jsx)(n.strong,{children:"Compute configuration"})," should be set to ",(0,s.jsx)(n.code,{children:"Launch Type"})," instead of the more advanced ",(0,s.jsx)(n.code,{children:"Capacity provider strategy"}),". Our ",(0,s.jsx)(n.strong,{children:"Launch type"})," will be ",(0,s.jsx)(n.code,{children:"FARGATE"})," and the ",(0,s.jsx)(n.strong,{children:"Platform version"})," will be ",(0,s.jsx)(n.code,{children:"LATEST"}),". This will allow our service to directly launch instances via Fargate to run our tasks."]}),"\n",(0,s.jsx)(n.h4,{id:"service-details",children:"Service Details"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["For the ",(0,s.jsx)(n.strong,{children:"Task definition"}),", choose the ",(0,s.jsx)(n.strong,{children:"Family"})," we created in the previous steps, ",(0,s.jsx)(n.code,{children:"my-apache-app"}),", and the only ",(0,s.jsx)(n.strong,{children:"Revision"})," we have, ",(0,s.jsx)(n.code,{children:"1 (LATEST)"}),". Our service will use this task definition to create and manage our task for us."]}),"\n",(0,s.jsxs)(n.li,{children:["Next, select the default ",(0,s.jsx)(n.strong,{children:"Service name"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"deployment-configuration",children:"Deployment configuration"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["We will use a ",(0,s.jsx)(n.strong,{children:"Service type"})," of ",(0,s.jsx)(n.code,{children:"Replica"}),", which allows us to run multiple, simultaneous versions of our task for high-availability. To start, we'll choose to set the ",(0,s.jsx)(n.strong,{children:"Desired tasks"})," to ",(0,s.jsx)(n.code,{children:"1"})," (i.e., only run a single task with a single instance of our server)."]}),"\n",(0,s.jsx)(n.li,{children:"Leave the rest of the defaults."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"networking",children:"Networking"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.strong,{children:"VPC"})," select ",(0,s.jsx)(n.strong,{children:"Wordpress VPC"})]}),"\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.strong,{children:"Subnets"})," make sure the following are selected (they should be by default)"]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Public Subnet 1"}),"\n",(0,s.jsx)(n.li,{children:"Public Subnet 2"}),"\n",(0,s.jsx)(n.li,{children:"Private Subnet 1"}),"\n",(0,s.jsx)(n.li,{children:"Private Subnet 2"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"security-group",children:"Security Group"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.strong,{children:"Security group"})," select ",(0,s.jsx)(n.strong,{children:"Use an existing security group"})]}),"\n",(0,s.jsxs)(n.li,{children:["From the ",(0,s.jsx)(n.strong,{children:"Security group name"})," drop down menu check ",(0,s.jsx)(n.strong,{children:"Wordpress Website SG"})," and uncheck ",(0,s.jsx)(n.strong,{children:"default"})]}),"\n",(0,s.jsxs)(n.li,{children:["Leave ",(0,s.jsx)(n.strong,{children:"Public IP"})," as ",(0,s.jsx)(n.strong,{children:"Turned on"})," to auto-assign a public IP to your tasks."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Click ",(0,s.jsx)(n.strong,{children:"Create"}),". It may take several minutes to create."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);