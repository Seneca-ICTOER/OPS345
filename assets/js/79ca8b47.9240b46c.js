"use strict";(self.webpackChunkOPS345_CE=self.webpackChunkOPS345_CE||[]).push([[658],{847:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Labs/lab7","title":"Lab 7 - Simple Storage Service (S3) Glacier","description":"Configure backups using S3 Glacier","source":"@site/docs/Labs/lab7.md","sourceDirName":"Labs","slug":"/Labs/lab7","permalink":"/OPS345/Labs/lab7","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/Labs/lab7.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"lab7","title":"Lab 7 - Simple Storage Service (S3) Glacier","sidebar_position":7,"description":"Configure backups using S3 Glacier"},"sidebar":"courseNotesSidebar","previous":{"title":"Lab 6 - Amazon Elastic Container Service (ECS)","permalink":"/OPS345/Labs/lab6"},"next":{"title":"Lab 8 - Elastic Beanstalk","permalink":"/OPS345/Labs/lab8"}}');var r=s(4848),l=s(8453);const c={id:"lab7",title:"Lab 7 - Simple Storage Service (S3) Glacier",sidebar_position:7,description:"Configure backups using S3 Glacier"},t="Lab 7 - Simple Storage Service (S3) Glacier",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Create an S3 bucket",id:"create-an-s3-bucket",level:2},{value:"Create a database snapshot",id:"create-a-database-snapshot",level:2},{value:"Creating an IAM Role",id:"creating-an-iam-role",level:2},{value:"Creating an AWS Key Management Service (KMS) key",id:"creating-an-aws-key-management-service-kms-key",level:2},{value:"Exporting your backup to an S3 bucket",id:"exporting-your-backup-to-an-s3-bucket",level:2}];function o(e){const n={h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lab-7---simple-storage-service-s3-glacier",children:"Lab 7 - Simple Storage Service (S3) Glacier"})}),"\n",(0,r.jsx)(n.h1,{id:"under-development",children:"Under Development"}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.h2,{id:"create-an-s3-bucket",children:"Create an S3 bucket"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"S3"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create bucket"})]}),"\n",(0,r.jsxs)(n.li,{children:["On the ",(0,r.jsx)(n.strong,{children:"Create bucket"})," page","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Bucket name: ",(0,r.jsx)(n.strong,{children:"senecausername-wordpressbackup"})]}),"\n",(0,r.jsx)(n.li,{children:"Use the rest of the defaults"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create bucket"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"create-a-database-snapshot",children:"Create a database snapshot"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Aurora and RDS > Snapshots"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Take snapshot"})]}),"\n",(0,r.jsxs)(n.li,{children:["On the ",(0,r.jsx)(n.strong,{children:"Take DB Snapshot"})," page select","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Snapshot type: ",(0,r.jsx)(n.strong,{children:"DB instance"})]}),"\n",(0,r.jsxs)(n.li,{children:["DB instance: ",(0,r.jsx)(n.strong,{children:"wordpress-db"})]}),"\n",(0,r.jsxs)(n.li,{children:["Snapshot name: ",(0,r.jsx)(n.strong,{children:"initialbackup"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Take snapshot"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-an-iam-role",children:"Creating an IAM Role"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["IAM","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click on ",(0,r.jsx)(n.strong,{children:"Roles"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create role"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use case select: ",(0,r.jsx)(n.strong,{children:"S3"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Next"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Add permissions. Search for"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"AmazonS3FullAccess"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"AmazonRDSDataFullAccess"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Next"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Name, review and create"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Role name: rds-s3-backup"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create role"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-an-aws-key-management-service-kms-key",children:"Creating an AWS Key Management Service (KMS) key"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Key Management Service (KMS)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create a key"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under ",(0,r.jsx)(n.strong,{children:"Configure key"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Key type: ",(0,r.jsx)(n.strong,{children:"Asymmetric"})]}),"\n",(0,r.jsxs)(n.li,{children:["Key usage: ",(0,r.jsx)(n.strong,{children:"Encrypt and decrypt"})]}),"\n",(0,r.jsxs)(n.li,{children:["Key spec: ",(0,r.jsx)(n.strong,{children:"RSA_4096"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Next"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under ",(0,r.jsx)(n.strong,{children:"Add labels"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Alias: ",(0,r.jsx)(n.strong,{children:"wpbackupkey"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Next"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under ",(0,r.jsx)(n.strong,{children:"Define key administrative permissions - optional"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Accept the defaults and click ",(0,r.jsx)(n.strong,{children:"Next"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under ",(0,r.jsx)(n.strong,{children:"Define key usage permissions - optional"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["(use the search or scroll)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Select ",(0,r.jsx)(n.strong,{children:"LabRole"})]}),"\n",(0,r.jsxs)(n.li,{children:["Select ",(0,r.jsx)(n.strong,{children:"AWSServiceRoleForRDS"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under ",(0,r.jsx)(n.strong,{children:"Edit key policy - optional"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Accept the defaults and click ",(0,r.jsx)(n.strong,{children:"Next"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Verify everything looks ok. Scroll to the bottom and click ",(0,r.jsx)(n.strong,{children:"Finish"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click on your ",(0,r.jsx)(n.strong,{children:"Key ID"})," and copy the ",(0,r.jsx)(n.strong,{children:"ARN"}),". You will need this later."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"exporting-your-backup-to-an-s3-bucket",children:"Exporting your backup to an S3 bucket"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Aurora and RDS > Snapshots"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Check the box beside ",(0,r.jsx)(n.strong,{children:"initialbackup"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the actions dropdown select ",(0,r.jsx)(n.strong,{children:"Export to Amazon S3"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Export to Amazon S3 page:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Settings > Export identifier ",(0,r.jsx)(n.strong,{children:"wpbackup-month-date-year"})," ie: ",(0,r.jsx)(n.strong,{children:"wpbackup-jul-5-2025"})]}),"\n",(0,r.jsxs)(n.li,{children:["Make sure the S3 destination is set to your S3 bucket: ",(0,r.jsx)(n.strong,{children:"senecausername-wordpressbackup"})]}),"\n",(0,r.jsxs)(n.li,{children:["IAM role: ",(0,r.jsx)(n.strong,{children:"LabRole"})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var i=s(6540);const r={},l=i.createContext(r);function c(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);